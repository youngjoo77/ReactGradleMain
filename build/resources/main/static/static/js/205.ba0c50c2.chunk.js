"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[205],{1205:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(8152),r=n(2791),s=n(6871),o=n(8214),l=n(5861),c=n(4569),i=n.n(c),u=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var n,a,r,s,l,c,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/api",n=t.method,a="/api"+t.url,r=t.data,t.loading,s=null!=localStorage.getItem("token")||""!=localStorage.getItem("token")?" Bearer "+localStorage.getItem("token"):"",l={headers:{"Content-Type":"application/json",Authorization:s}},e.prev=7,e.t3="get"===n,!e.t3){e.next=13;break}return e.next=12,i().get(a,l);case 12:e.t3=e.sent;case 13:if(e.t2=e.t3,e.t2){e.next=21;break}if(e.t4="post"===n,!e.t4){e.next=20;break}return e.next=19,i().post(a,r,l);case 19:e.t4=e.sent;case 20:e.t2=e.t4;case 21:if(e.t1=e.t2,e.t1){e.next=29;break}if(e.t5="put"===n,!e.t5){e.next=28;break}return e.next=27,i().put(a,r,l);case 27:e.t5=e.sent;case 28:e.t1=e.t5;case 29:if(e.t0=e.t1,e.t0){e.next=37;break}if(e.t6="delete"===n,!e.t6){e.next=36;break}return e.next=35,i().delete(a,l);case 35:e.t6=e.sent;case 36:e.t0=e.t6;case 37:if(!(c=e.t0)||!c.data.error){e.next=42;break}return console.log(c.data.error),alert("Wrong ID or Password"),e.abrupt("return",null);case 42:if(c){e.next=45;break}return alert("false!"),e.abrupt("return",null);case 45:return e.abrupt("return",c);case 48:if(e.prev=48,e.t7=e.catch(7),!i().isAxiosError(e.t7)){e.next=56;break}if(!(u=e.t7)||!u.response){e.next=56;break}return console.log(u.response.data),alert("failed!"),e.abrupt("return",null);case 56:return console.log(e.t7),alert("failed!"),e.abrupt("return",null);case 59:case"end":return e.stop()}}),e,null,[[7,48]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e,t,n){return u({method:"post",url:e,data:t,loading:n})},p=n(7022),f=n(6157),g=n(184),x=function(){var e=(0,r.useState)(""),t=(0,a.Z)(e,2),n=t[0],o=t[1],l=(0,r.useState)(""),c=(0,a.Z)(l,2),i=c[0],u=c[1],x=(0,r.useState)(""),h=(0,a.Z)(x,2),k=h[0],b=h[1],m=(0,r.useState)(""),v=(0,a.Z)(m,2),j=(v[0],v[1]),S=(0,r.useState)(!1),I=(0,a.Z)(S,2),Z=(I[0],I[1]),w=(0,r.useState)(!1),C=(0,a.Z)(w,2),y=(C[0],C[1]),A=(0,s.s0)();return(0,g.jsx)("div",{children:(0,g.jsxs)(p.Z,{className:"panel",children:[(0,g.jsx)("h1",{children:"Login"}),(0,g.jsxs)("section",{children:[(0,g.jsx)("div",{children:"User Name"}),(0,g.jsx)("div",{children:(0,g.jsx)("input",{type:"text",name:"email",value:n,onChange:function(e){return function(e){o(e.target.value)}(e)}})})]}),(0,g.jsxs)("section",{children:[(0,g.jsx)("div",{children:"Password"}),(0,g.jsx)("div",{children:(0,g.jsx)("input",{type:"password",name:"password",value:i,onChange:function(e){u(e.target.value)}})})]}),(0,g.jsx)("section",{children:(0,g.jsx)(f.Z,{className:"btn btn-success",onClick:function(){console.log("loginClicked"),d("/auth/login",{email:n,password:i},!0).then((function(e){if(null!==e){var t=e.data;j(t.grantType),b(t.accessToken),o(n),localStorage.setItem("token",k),localStorage.setItem("email",n),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("tokenExpiresIn",String(t.tokenExpiresIn)),console.log("login success!!!"),Z(!0),y(!1),console.log("page \uc774\ub3d9"),A("/main")}})).catch((function(){localStorage.setItem("isAuthenticated","false"),Z(!1),y(!0)}))},children:"Login"})})]})})}}}]);
//# sourceMappingURL=205.ba0c50c2.chunk.js.map